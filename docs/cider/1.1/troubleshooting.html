<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Troubleshooting :: CIDER Docs</title>
    <link rel="canonical" href="https://docs.cider.mx/cider/troubleshooting.html">
    <link rel="prev" href="caveats.html">
    <link rel="next" href="faq.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="stylesheet" href="../../_/css/site-extra.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140176314-1"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-140176314-1')</script>
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://cider.mx">CIDER</a>
        <span class="separator">//</span>
        <a href="https://docs.cider.mx">Docs</a>
      </div>
      <div class="navbar-item">
        <div id="docsearch"></div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Projects</a>
          <div class="navbar-dropdown">
              <a class="navbar-item" href="https://github.com/clojure-emacs/cider">CIDER</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/cider-nrepl">CIDER nREPL</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/orchard">Orchard</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/clojure-mode">clojure-mode</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="/cider/about/support.html">Support</a>
            <a class="navbar-item" href="/cider/contributing.html">Contributing</a>
            <a class="navbar-item" href="https://opencollective.com/cider">Open Collective</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="cider" data-version="1.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">CIDER</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="basics/installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="basics/up_and_running.html">Up and Running</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="basics/middleware_setup.html">nREPL Middleware Setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">ClojureScript Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cljs/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cljs/up_and_running.html">Up and Running</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cljs/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cljs/figwheel.html">Using Figwheel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cljs/shadow-cljs.html">Using shadow-cljs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="cljs/other_repls.html">Using Other REPLs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Alternative Platforms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="platforms/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="platforms/babashka.html">Babashka</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Using CIDER</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usage/interactive_programming.html">Interactive Programming</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usage/cider_mode.html">Using cider-mode</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usage/code_evaluation.html">Code Evaluation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usage/code_completion.html">Code Completion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usage/pretty_printing.html">Pretty Printing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usage/dealing_with_errors.html">Dealing with Errors</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usage/working_with_documentation.html">Working with Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usage/managing_connections.html">Managing Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="usage/misc_features.html">Misc Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Using the REPL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="repl/basic_usage.html">Basic Usage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="repl/keybindings.html">Keybindings</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="repl/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="repl/history.html">REPL History</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testing/running_tests.html">Running Tests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testing/test_reports.html">Test Reports</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testing/supported_libraries.html">Supported Libraries</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Debugging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debugging/debugger.html">Debugger</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debugging/enlighten.html">Enlighten</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debugging/inspector.html">Inspector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debugging/macroexpansion.html">Macroexpansion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debugging/profiling.html">Profiling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="debugging/tracing.html">Tracing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="config/basic_config.html">Basic Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="config/syntax_highlighting.html">Syntax Highlighting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="config/indentation.html">Indentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="config/eldoc.html">Eldoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="config/project_config.html">Project-specific Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="indent_spec.html">Indentation Specification</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="caveats.html">Caveats</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="faq.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="additional_packages.html">Additional Packages</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="additional_resources.html">Additional Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="contributing.html">Contributing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="contributing/docs.html">Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="contributing/hacking.html">Hacking on CIDER</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="contributing/funding.html">Funding</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">About</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="about/history.html">History</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="about/team.html">Team</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="about/support.html">Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="about/changelog.html">Changelog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="about/release_policy.html">Release Policy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="about/compatibility.html">Compatibility</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="about/logo.html">Logo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="about/license.html">License</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">CIDER</span>
    <span class="version">1.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">CIDER</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../index.html">default</a>
        </li>
        <li class="version">
          <a href="../1.7/index.html">1.7</a>
        </li>
        <li class="version">
          <a href="../1.6/index.html">1.6</a>
        </li>
        <li class="version">
          <a href="../1.5/index.html">1.5</a>
        </li>
        <li class="version">
          <a href="../1.4/index.html">1.4</a>
        </li>
        <li class="version">
          <a href="../1.3/index.html">1.3</a>
        </li>
        <li class="version">
          <a href="../1.2/index.html">1.2</a>
        </li>
        <li class="version is-current">
          <a href="index.html">1.1</a>
        </li>
        <li class="version">
          <a href="../1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cider-nrepl/latest/index.html">CIDER nREPL</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cider-nrepl/latest/index.html">0.31</a>
        </li>
        <li class="version">
          <a href="../../cider-nrepl/0.26/index.html">0.26</a>
        </li>
        <li class="version">
          <a href="../../cider-nrepl/0.25/index.html">0.25</a>
        </li>
        <li class="version">
          <a href="../../cider-nrepl/0.24/index.html">0.24</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">CIDER</a></li>
    <li><a href="troubleshooting.html">Troubleshooting</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.1</button>
  <div class="version-menu">
    <a class="version" href="../troubleshooting.html">default</a>
    <a class="version" href="../1.7/troubleshooting.html">1.7</a>
    <a class="version" href="../1.6/troubleshooting.html">1.6</a>
    <a class="version" href="../1.5/troubleshooting.html">1.5</a>
    <a class="version" href="../1.4/troubleshooting.html">1.4</a>
    <a class="version" href="../1.3/troubleshooting.html">1.3</a>
    <a class="version" href="../1.2/troubleshooting.html">1.2</a>
    <a class="version is-current" href="troubleshooting.html">1.1</a>
    <a class="version" href="../1.0/troubleshooting.html">1.0</a>
  </div>
</div>
<div class="edit-this-page"><a href="https://github.com/clojure-emacs/cider/blob/v1.1.1/doc/modules/ROOT/pages/troubleshooting.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Troubleshooting</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In case you run into issues here are a few tips that can help you diagnose the
problem.</p>
</div>
<div class="paragraph">
<p>Generally, it&#8217;s not a bad idea to configure Emacs to spit the backtrace on error
(instead of just logging the error in the <code>*Messages*</code> buffer). You can toggle
this behavior by using <kbd>M-x</kbd> <code>toggle-debug-on-error</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="debugging-cider-commands"><a class="anchor" href="#debugging-cider-commands"></a>Debugging CIDER commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Emacs features a super powerful built-in
<a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Edebug.html">Emacs Lisp debugger</a>
and using it is the best way to diagnose problems of any kind.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Here&#8217;s a <a href="https://www.youtube.com/watch?v=odkYXXYOxpo">great crash
 course</a> on using the debugger.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To debug some command you need to do the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Figure out the name of the command you want to debug (e.g. by using <kbd>C-h k</kbd>
to see which command is associated with some keybinding).</p>
</li>
<li>
<p>Find the source of the command (e.g. by using <kbd>M-x</kbd> <code>find-function</code>
<kbd>RET</kbd> <code>function-name</code>).</p>
</li>
<li>
<p>Press <kbd>C-u C-M-x</kbd> while in the body of the function</p>
</li>
<li>
<p>Run the command again.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At this point you&#8217;ll be dropped in the debugger and you can step forward until
you find the problem.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="profiling-cider-commands"><a class="anchor" href="#profiling-cider-commands"></a>Profiling CIDER commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Emacs comes with a <a href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Profiling.html">built-in
profiler</a>. Using
it is pretty simple:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start it with <kbd>M-x</kbd> <code>profiler-start</code>.</p>
</li>
<li>
<p>Invoke some commands.</p>
</li>
<li>
<p>Get the report with <kbd>M-x</kbd> <code>profiler-report</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you intend to share the profiling results with someone it&#8217;s a good idea to
save the report buffer to a file with <kbd>C-x C-w</kbd>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="debugging-the-communication-with-nrepl"><a class="anchor" href="#debugging-the-communication-with-nrepl"></a>Debugging the communication with nREPL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>From time to time it might be a good idea to inspect the messages exchanged
between CIDER and nREPL. CIDER has a simple message log that looks like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>(--&gt;
  id         "16"
  op         "eval"
  session    "eb3ef563-86ec-4d9e-9fa8-a56ce0e0f0b0"
  time-stamp "2020-03-15 16:01:42.963936000"
  code       "(in-ns 'nrepl.completion)"
)
(&lt;--
  id         "16"
  session    "eb3ef563-86ec-4d9e-9fa8-a56ce0e0f0b0"
  time-stamp "2020-03-15 16:01:43.027347000"
  ns         "nrepl.completion"
  value      "#namespace[nrepl.completion]"
)
(&lt;--
  id         "16"
  session    "eb3ef563-86ec-4d9e-9fa8-a56ce0e0f0b0"
  time-stamp "2020-03-15 16:01:43.195358000"
  status     ("done")
)</pre>
</div>
</div>
<div class="paragraph">
<p>That&#8217;s CIDER&#8217;s way of representing the request (marked with <code>-&#8594;</code>) and response maps (marked with <code>&#8592;-</code>).</p>
</div>
<div class="paragraph">
<p>nREPL message logging is not enabled by default. Set <code>nrepl-log-messages</code> to <code>t</code>
to activate it. Alternatively you can use <kbd>M-x</kbd>
<code>nrepl-toggle-message-logging</code> to enable/disable logging temporary within your
current Emacs session. Note that enabling message logging can impact
performance.</p>
</div>
<div class="paragraph">
<p>You can find the message log in the <code>*nrepl-messages repl-info*</code> buffer,
provided you&#8217;ve enabled nREPL message logging. There&#8217;s going to be one buffer
per each active REPL.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can jump quickly to the relevant messages buffer by pressing
<kbd>C-c M-s m</kbd>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="commonly-encountered-problems-and-how-to-solve-them"><a class="anchor" href="#commonly-encountered-problems-and-how-to-solve-them"></a>Commonly encountered problems (and how to solve them)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="repl-not-starting"><a class="anchor" href="#repl-not-starting"></a>REPL not starting</h3>
<div class="paragraph">
<p>Make sure that your CIDER version matches your <code>cider-nrepl</code> version. Check
the contents of the <code>*Messages*</code> buffer for CIDER-related errors. You should
also check the nREPL messages passed between CIDER and nREPL in
<code>*nrepl-messages*</code>. If you don&#8217;t see anything useful there it&#8217;s time to bring
out the big guns.</p>
</div>
<div class="sect3">
<h4 id="debugging-the-repl-init"><a class="anchor" href="#debugging-the-repl-init"></a>Debugging the REPL init</h4>
<div class="paragraph">
<p>To debug CIDER&#8217;s REPL initialization it&#8217;s a good idea to hook into one of its
entry points. Add a breakpoint to <code>cider-make-repl</code> (<kbd>C-u C-M-x</kbd>, while
in its body). Next time you start CIDER you&#8217;ll be dropped in the debugger and
you can step forward until you find the problem.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="missing-nrepl-messages-buffer"><a class="anchor" href="#missing-nrepl-messages-buffer"></a>Missing <code>*nrepl-messages*</code> buffer</h3>
<div class="paragraph">
<p>nREPL message logging is not enabled by default. Set <code>nrepl-log-messages</code> to <code>t</code>
to activate it. Alternatively you can use <kbd>M-x</kbd>
<code>nrepl-toggle-message-logging</code> to enable/disable logging temporary within your
current Emacs session. Note that enabling message logging can impact
performance.</p>
</div>
</div>
<div class="sect2">
<h3 id="cider-debug-complains-that-it-failed-to-instrument"><a class="anchor" href="#cider-debug-complains-that-it-failed-to-instrument"></a><code>cider-debug</code> complains that it &#8220;failed to instrument &#8230;&#8203;&#8221;</h3>
<div class="paragraph">
<p>In the REPL buffer, issue the following.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>your.namespace&gt; (ns cider.nrepl.middleware.util.instrument)
cider.nrepl.middleware.util.instrument&gt; (def verbose-debug true)</pre>
</div>
</div>
<div class="paragraph">
<p>This will cause CIDER to print extensive information to the REPL buffer when you
try to debug an expression (e.g., with <kbd>C-u C-M-x</kbd>). <a href="https://github.com/clojure-emacs/cider-nrepl/issues/new">File an issue</a>
and copy this information.</p>
</div>
</div>
<div class="sect2">
<h3 id="the-repl-blows-up-when-some-function-returns-an-url"><a class="anchor" href="#the-repl-blows-up-when-some-function-returns-an-url"></a>The REPL blows up when some function returns an URL</h3>
<div class="paragraph">
<p>Most likely you&#8217;ve encountered some issue with the <code>content-type</code> middleware. Generally, that&#8217;s
easy to confirm by inspecting the stracktrace:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">user&gt; (java.net.URI. "mailto:foo@bar.com")
#object[java.net.URI 0x36966ca2 "mailto:foo@bar.com"]ERROR: Unhandled REPL handler exception processing message {:op slurp, :url mailto:foo@bar.com, :session 69c4d8e1-7bb4-45ad-8075-d21995fd50ab, :id 1579}
java.net.UnknownServiceException: protocol doesn't support input
	at java.base/java.net.URLConnection.getInputStream(URLConnection.java:840)
	at cider.nrepl.middleware.slurp$slurp_url_to_content_PLUS_body.invokeStatic(slurp.clj:100)
	at cider.nrepl.middleware.slurp$slurp_url_to_content_PLUS_body.invoke(slurp.clj:82)
	at cider.nrepl.middleware.slurp$handle_slurp.invokeStatic(slurp.clj:117)
	at cider.nrepl.middleware.slurp$handle_slurp.invoke(slurp.clj:109)</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can disable the middleware like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-use-content-types t)</code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s disabled by default starting with CIDER 0.25.</p>
</div>
</div>
<div class="sect2">
<h3 id="debugging-freezes-lock-ups"><a class="anchor" href="#debugging-freezes-lock-ups"></a>Debugging freezes &amp; lock-ups</h3>
<div class="paragraph">
<p>Sometimes a CIDER command might hang for a while (e.g. due to a bug or a
configuration issue). Such problems are super annoying, but are relatively easy
to debug. Here are a few steps you can take in such situations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Do <kbd>M-x</kbd> <code>toggle-debug-on-quit</code></p>
</li>
<li>
<p>Reproduce the problem</p>
</li>
<li>
<p>Hit <kbd>C-g</kbd> around 10 seconds into the hang</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This will bring up a backtrace with the entire function stack, including
function arguments. So you should be able to figure out what&#8217;s going on (or at
least what&#8217;s being required).</p>
</div>
</div>
<div class="sect2">
<h3 id="warning-saying-you-have-to-use-newer-nrepl"><a class="anchor" href="#warning-saying-you-have-to-use-newer-nrepl"></a>Warning saying you have to use newer nREPL</h3>
<div class="paragraph">
<p>CIDER currently requires at least nREPL 0.6 to work properly. As nREPL comes
bundled with Leiningen and Boot, from time to time you might have to override the
version supplied by them (e.g. if you&#8217;re forced to use an older version of
Leiningen or there&#8217;s no release bundling the required nREPL version yet). Leiningen
users can add this to their <code>profiles.clj</code> to force the proper dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">{:repl {:dependencies [[nrepl/nrepl "x.y.z"]]}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The procedure is pretty similar for Boot.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Make sure you add the newer nREPL dependency to the <code>:dependencies</code> key instead
of <code>:plugins</code> (where the <code>cider-nrepl</code> Lein plugin resides). That&#8217;s a pretty common
mistake.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Generally you&#8217;re advised to use the newest nREPL with CIDER, as bugs get fixed
in pretty much every release.</p>
</div>
</div>
<div class="sect2">
<h3 id="missing-clojure-function-after-cider-update"><a class="anchor" href="#missing-clojure-function-after-cider-update"></a>Missing clojure-&#8230;&#8203; function after CIDER update</h3>
<div class="paragraph">
<p>Most likely you&#8217;ve updated CIDER, without updating <code>clojure-mode</code> as well.</p>
</div>
<div class="paragraph">
<p>CIDER depends on <code>clojure-mode</code> and you should always update them together, as
the latest CIDER version might depend on functionality present only in the latest
<code>clojure-mode</code> version.</p>
</div>
</div>
<div class="sect2">
<h3 id="i-upgraded-cider-using-package-el-and-it-broke"><a class="anchor" href="#i-upgraded-cider-using-package-el-and-it-broke"></a>I upgraded CIDER using <code>package.el</code> and it broke</h3>
<div class="paragraph">
<p>The built-in package manager isn&#8217;t perfect and sometimes it messes up.  If you
just updated and encountered an error you should try the following before
opening an issue: Go into the <code>.emacs.d/elpa</code> directory, delete any folders
related to CIDER, restart Emacs and then re-install the missing packages.  Note
that the order here matters.</p>
</div>
</div>
<div class="sect2">
<h3 id="i-upgraded-cider-using-package-el-and-nothing-changed"><a class="anchor" href="#i-upgraded-cider-using-package-el-and-nothing-changed"></a>I upgraded CIDER using <code>package.el</code> and nothing changed</h3>
<div class="paragraph">
<p>Emacs doesn&#8217;t load the new files, it only installs them on disk.  To see the
effect of changes you have to restart Emacs.</p>
</div>
</div>
<div class="sect2">
<h3 id="cider-complains-of-the-cider-nrepl-version"><a class="anchor" href="#cider-complains-of-the-cider-nrepl-version"></a>CIDER complains of the <code>cider-nrepl</code> version</h3>
<div class="paragraph">
<p>This is a warning displayed on the REPL buffer when it starts, and usually looks like this:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p><strong>WARNING:</strong> CIDER 0.18.0 requires cider-nrepl x.y.z, but you&#8217;re currently using cider-nrepl a.b.c. Some functionality may not work properly!</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>where <code>a.b.c</code> might be an actual version, like <code>0.17.0</code>, or it might be <code>not installed</code> or <code>nil</code>.
The solution to this depends on what you see and on what you&#8217;re doing.</p>
</div>
<div class="sect3">
<h4 id="you-see-a-number-like-x-x-x-and-youre-starting-the-repl-with-cider-connect"><a class="anchor" href="#you-see-a-number-like-x-x-x-and-youre-starting-the-repl-with-cider-connect"></a>You see a number like <code>X.X.X</code>, and you&#8217;re starting the REPL with <code>cider-connect</code></h4>
<div class="paragraph">
<p>Your project specifies the wrong version for the cider-nrepl middleware. See the
<a href="basics/middleware_setup.html" class="xref page">instructions</a>
in the "Middleware Setup" section.</p>
</div>
</div>
<div class="sect3">
<h4 id="you-see-not-installed-or-nil-and-youre-starting-the-repl-with-cider-connect"><a class="anchor" href="#you-see-not-installed-or-nil-and-youre-starting-the-repl-with-cider-connect"></a>You see <code>not installed</code> or <code>nil</code>, and you&#8217;re starting the REPL with <code>cider-connect</code></h4>
<div class="paragraph">
<p>To use <code>cider-connect</code> you need to add the cider-nrepl middleware to your project. See the
<a href="basics/middleware_setup.html" class="xref page">instructions</a>
in the "Middleware Setup" section.</p>
</div>
</div>
<div class="sect3">
<h4 id="you-see-not-installed-or-nil-and-youre-starting-the-repl-with-cider-jack-in"><a class="anchor" href="#you-see-not-installed-or-nil-and-youre-starting-the-repl-with-cider-jack-in"></a>You see <code>not installed</code> or <code>nil</code>, and you&#8217;re starting the REPL with <code>cider-jack-in</code></h4>
<div class="ulist">
<ul>
<li>
<p>Do <code>C-h v cider-inject-dependencies-at-jack-in</code>, and check that this variable is non-nil.</p>
</li>
<li>
<p>Make sure your project depends on at least Clojure <code>1.7.0</code>.</p>
</li>
<li>
<p>If you use Leiningen, make sure your <code>lein --version</code> is at least <code>2.9.0</code>.</p>
</li>
<li>
<p>If you use Boot and you&#8217;ve changed <code>cider-boot-parameters</code>, that&#8217;s probably the cause.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the above doesn&#8217;t work, you can try specifying the cider-nrepl middleware
manually, as per the
<a href="basics/middleware_setup.html" class="xref page">instructions</a>
in the "Middleware Setup" section.</p>
</div>
</div>
<div class="sect3">
<h4 id="you-see-a-number-like-x-x-x-and-youre-starting-the-repl-with-cider-jack-in"><a class="anchor" href="#you-see-a-number-like-x-x-x-and-youre-starting-the-repl-with-cider-jack-in"></a>You see a number like <code>X.X.X</code>, and you&#8217;re starting the REPL with <code>cider-jack-in</code></h4>
<div class="paragraph">
<p>This means you&#8217;re manually adding the cider-nrepl middleware in your project,
but you shouldn&#8217;t do that because <code>cider-jack-in</code> already does that for
you. Look into the following files, and ensure you&#8217;ve removed all references to
<code>cider-nrepl</code> and <code>nrepl</code>: <code>project.clj</code>, <code>build.boot</code>,
<code>~/.lein/profiles.clj</code> and <code>~/.boot/profile.boot</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="i-get-some-error-related-to-refactor-nrepl-on-startup"><a class="anchor" href="#i-get-some-error-related-to-refactor-nrepl-on-startup"></a>I get some error related to refactor-nrepl on startup</h3>
<div class="paragraph">
<p>The package <code>clj-refactor</code> would normally inject its own middleware on
<code>cider-jack-in</code>, just as CIDER itself would. Usually that&#8217;s not a
problem, as long as you&#8217;re using compatible versions of CIDER and
<code>clj-refactor</code>, but if you&#8217;re getting some error probably that&#8217;s not
the case. You&#8217;ve got two options to solve this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use compatible versions of the two projects (e.g. their most recent
snapshots or most recent stable releases)</p>
</li>
<li>
<p>Disable the <code>clj-refactor</code> middleware injection:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cljr-inject-dependencies-at-jack-in nil)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="off-by-one-column-numbers"><a class="anchor" href="#off-by-one-column-numbers"></a>Off-by-one column numbers</h3>
<div class="paragraph">
<p>Emacs and Clojure differ in their indexing of column numbers&#8201;&#8212;&#8201;Emacs starts
counting from 0 while Clojure starts from 1. Accordingly, the <code>cider-nrepl</code>
middleware uses 1-based indexing and all conversions to 0-based indexing should
be handled client-side. See <a href="https://github.com/clojure-emacs/cider/issues/2852" class="bare">https://github.com/clojure-emacs/cider/issues/2852</a>.</p>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="caveats.html">Caveats</a></span>
  <span class="next"><a href="faq.html">FAQ</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright (C) 2012-2022 <a href="https://batsov.com">Bozhidar Batsov</a> and <a href="https://cider.mx">CIDER</a> contributors.</p>
  <p>Except where otherwise noted, docs.cider.mx is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a> (CC BY-SA 4.0).</p>
</footer>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script>
<script type="text/javascript">
 docsearch({
   appId: '1AZEMR3ZT0',
   apiKey: 'd2cfc21fce00ac9d3f787c0d8e064d42',
   indexName: 'cider',
   container: '#docsearch',
   debug: false // Set debug to true if you want to inspect the dropdown
 });
</script>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
