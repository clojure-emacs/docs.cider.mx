<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>REPL Configuration :: CIDER Docs</title>
    <link rel="canonical" href="https://docs.cider.mx/cider/repl/configuration.html">
    <link rel="prev" href="keybindings.html">
    <link rel="next" href="history.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/site-extra.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@alpha">
<link rel="icon" href="../../../_/img/favicon.ico" type="image/x-icon">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140176314-1"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-140176314-1')</script>
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://cider.mx">CIDER</a>
        <span class="separator">//</span>
        <a href="https://docs.cider.mx">Docs</a>
      </div>
      <div class="navbar-item">
        <div id="docsearch"></div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Projects</a>
          <div class="navbar-dropdown">
              <a class="navbar-item" href="https://github.com/clojure-emacs/cider">CIDER</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/cider-nrepl">CIDER nREPL</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/orchard">Orchard</a>
              <a class="navbar-item" href="https://github.com/clojure-emacs/clojure-mode">clojure-mode</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="/cider/about/support.html">Support</a>
            <a class="navbar-item" href="/cider/contributing.html">Contributing</a>
            <a class="navbar-item" href="https://opencollective.com/cider">Open Collective</a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="cider" data-version="1.5">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all"></button>
    <h3 class="title"><a href="../index.html">CIDER</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics/installation.html">Installation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics/up_and_running.html">Up and Running</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../basics/middleware_setup.html">nREPL Middleware Setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">ClojureScript Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cljs/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cljs/up_and_running.html">Up and Running</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cljs/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cljs/figwheel.html">Using Figwheel</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cljs/shadow-cljs.html">Using shadow-cljs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../cljs/other_repls.html">Using Other REPLs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Alternative Platforms</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../platforms/overview.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../platforms/babashka.html">Babashka</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Using CIDER</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/interactive_programming.html">Interactive Programming</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/cider_mode.html">Using cider-mode</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/code_evaluation.html">Code Evaluation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/code_completion.html">Code Completion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/pretty_printing.html">Pretty Printing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/dealing_with_errors.html">Dealing with Errors</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/working_with_documentation.html">Working with Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/managing_connections.html">Managing Connections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../usage/misc_features.html">Misc Features</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Using the REPL</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="basic_usage.html">Basic Usage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="keybindings.html">Keybindings</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="history.html">REPL History</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Testing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/running_tests.html">Running Tests</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/test_reports.html">Test Reports</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../testing/supported_libraries.html">Supported Libraries</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Debugging</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/debugger.html">Debugger</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/enlighten.html">Enlighten</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/inspector.html">Inspector</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/macroexpansion.html">Macroexpansion</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/profiling.html">Profiling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../debugging/tracing.html">Tracing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/basic_config.html">Basic Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/syntax_highlighting.html">Syntax Highlighting</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/indentation.html">Indentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/eldoc.html">Eldoc</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../config/project_config.html">Project-specific Configuration</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../indent_spec.html">Indentation Specification</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../caveats.html">Caveats</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../troubleshooting.html">Troubleshooting</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../faq.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../additional_packages.html">Additional Packages</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../additional_resources.html">Additional Resources</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../contributing.html">Contributing</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/docs.html">Documentation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/hacking.html">Hacking on CIDER</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../contributing/funding.html">Funding</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">About</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/history.html">History</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/team.html">Team</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/support.html">Support</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/changelog.html">Changelog</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/release_policy.html">Release Policy</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/compatibility.html">Compatibility</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/logo.html">Logo</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../about/license.html">License</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">CIDER</span>
    <span class="version">1.5</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">CIDER</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../index.html">default</a>
        </li>
        <li class="version">
          <a href="../../1.9/index.html">1.9</a>
        </li>
        <li class="version">
          <a href="../../1.8/index.html">1.8</a>
        </li>
        <li class="version">
          <a href="../../1.7/index.html">1.7</a>
        </li>
        <li class="version">
          <a href="../../1.6/index.html">1.6</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">1.5</a>
        </li>
        <li class="version">
          <a href="../../1.4/index.html">1.4</a>
        </li>
        <li class="version">
          <a href="../../1.3/index.html">1.3</a>
        </li>
        <li class="version">
          <a href="../../1.2/index.html">1.2</a>
        </li>
        <li class="version">
          <a href="../../1.1/index.html">1.1</a>
        </li>
        <li class="version">
          <a href="../../1.0/index.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../cider-nrepl/index.html">CIDER nREPL</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../cider-nrepl/index.html">default</a>
        </li>
        <li class="version">
          <a href="../../../cider-nrepl/0.43/index.html">0.43</a>
        </li>
        <li class="version">
          <a href="../../../cider-nrepl/0.26/index.html">0.26</a>
        </li>
        <li class="version">
          <a href="../../../cider-nrepl/0.25/index.html">0.25</a>
        </li>
        <li class="version">
          <a href="../../../cider-nrepl/0.24/index.html">0.24</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">CIDER</a></li>
    <li>Using the REPL</li>
    <li><a href="configuration.html">Configuration</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.5</button>
  <div class="version-menu">
    <a class="version" href="../../repl/configuration.html">default</a>
    <a class="version" href="../../1.9/repl/configuration.html">1.9</a>
    <a class="version" href="../../1.8/repl/configuration.html">1.8</a>
    <a class="version" href="../../1.7/repl/configuration.html">1.7</a>
    <a class="version" href="../../1.6/repl/configuration.html">1.6</a>
    <a class="version is-current" href="configuration.html">1.5</a>
    <a class="version" href="../../1.4/repl/configuration.html">1.4</a>
    <a class="version" href="../../1.3/repl/configuration.html">1.3</a>
    <a class="version" href="../../1.2/repl/configuration.html">1.2</a>
    <a class="version" href="../../1.1/repl/configuration.html">1.1</a>
    <a class="version" href="../../1.0/repl/configuration.html">1.0</a>
  </div>
</div>
<div class="edit-this-page"><a href="https://github.com/clojure-emacs/cider/blob/v1.5.0/doc/modules/ROOT/pages/repl/configuration.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">REPL Configuration</h1>
<div class="sect1">
<h2 id="behavior-on-connect"><a class="anchor" href="#behavior-on-connect"></a>Behavior on connect</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Normally, when you first establish a REPL connection, the REPL buffer is
auto-displayed in a separate window. You can suppress this behavior
like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-pop-to-buffer-on-connect nil)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want the REPL buffer to be auto-displayed, but don&#8217;t want it to be
focused, use this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-pop-to-buffer-on-connect 'display-only)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="behavior-on-switch"><a class="anchor" href="#behavior-on-switch"></a>Behavior on switch</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default <kbd>C-c C-z</kbd> will display the REPL buffer in a
different window.  You can make <kbd>C-c C-z</kbd> switch to the CIDER
REPL buffer in the current window:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-display-in-current-window t)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="customizing-the-repl-prompt"><a class="anchor" href="#customizing-the-repl-prompt"></a>Customizing the REPL prompt</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can customize the REPL buffer prompt by setting
<code>cider-repl-prompt-function</code> to a function that takes one
argument, a namespace name. For convenience, CIDER provides three
functions that implement common formats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cider-repl-prompt-lastname</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>ssl&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cider-repl-prompt-abbreviated</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>l.c.ssl&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cider-repl-prompt-default</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>leiningen.core.ssl&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>By default, CIDER uses <code>cider-repl-prompt-default</code>.</p>
</div>
<div class="paragraph">
<p>You may, of course, write your own function. For example, in <code>leiningen</code> there
are two namespaces with similar names - <code>leiningen.classpath</code> and
<code>leiningen.core.classpath</code>. To make them easily recognizable you can either
use the default value or you can opt to show only two segments of the
namespace and still be able to know which is the REPL&#8217;s current
namespace. Here is an example function that will do exactly that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(defun cider-repl-prompt-show-two (namespace)
  "Return a prompt string with the last 2 segments of NAMESPACE."
  (let ((names (reverse (subseq (reverse (split-string namespace "\\.")) 0 2))))
    (concat (car names) "." (cadr names) "&gt; ")))</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tab-completion"><a class="anchor" href="#tab-completion"></a>TAB Completion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can control the <kbd>TAB</kbd> key behavior in the REPL using the
<code>cider-repl-tab-command</code> variable.  While the default command
<code>cider-repl-indent-and-complete-symbol</code> should be an adequate choice for
most users, it&#8217;s very easy to switch to another command if you wish
to. For instance if you&#8217;d like <kbd>TAB</kbd> to only indent (maybe
because you&#8217;re used to completing with <kbd>M-TAB</kbd>) use the
following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-tab-command #'indent-for-tab-command)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="customizing-the-return-keys-behavior"><a class="anchor" href="#customizing-the-return-keys-behavior"></a>Customizing the <code>Return</code> key&#8217;s behavior</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ordinarily, <kbd>Return</kbd> immediate sends a form for
evaluation. If you want to insert a newline into the REPL buffer as
you&#8217;re editing, you can do so using <kbd>C-j</kbd>. If you are
entering a lot of longer forms that span multiple lines, it may be
more convenient to change the keybindings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(define-key cider-repl-mode-map (kbd "RET") #'cider-repl-newline-and-indent)
(define-key cider-repl-mode-map (kbd "C-&lt;return&gt;") #'cider-repl-return)</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will make <kbd>Return</kbd> insert a newline into the REPL buffer
and <kbd>C-Return</kbd> send the form off for evaluation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="auto-scrolling-the-repl-on-output"><a class="anchor" href="#auto-scrolling-the-repl-on-output"></a>Auto-scrolling the REPL on Output</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Prior to version 0.21.0, the REPL buffer would be automatically re-centered
whenever any output was printed, so that the prompt was on the bottom line of
the window, displaying the maximum possible amount of output above it. This is
no longer the default behavior&#8201;&#8212;&#8201;you can now replicate it by setting the
built-in option <code>scroll-conservatively</code>, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(add-hook 'cider-repl-mode-hook '(lambda () (setq scroll-conservatively 101)))</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="auto-trimming-the-repl-buffer"><a class="anchor" href="#auto-trimming-the-repl-buffer"></a>Auto-trimming the REPL buffer</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This functionality is disabled by default.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As noted <a href="basic_usage.html#known-limitations" class="xref page">previously</a>, the REPL buffer&#8217;s performance will degrade if its size
is allowed to grow infinitely. You can obviously clear the REPL manually from time to
time, but CIDER also has some auto-trimming functionality that can simplify
the process for you.</p>
</div>
<div class="paragraph">
<p>Auto-trimming can be enabled by setting <code>cider-repl-buffer-size-limit</code> to an integer. By
setting a limit to the number of characters in the buffer, the buffer can be
trimmed (from its beginning) after each evaluation if the set limit has been
exceeded. Here&#8217;s how you can set the size limit in your Emacs config:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-buffer-size-limit 100000)</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can also trigger auto-trimming manually by invoking the command <code>cider-repl-trim-buffer</code>
or the REPL shortcut <code>trim</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="result-prefix"><a class="anchor" href="#result-prefix"></a>Result Prefix</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can change the string used to prefix REPL results:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-result-prefix ";; =&gt; ")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which then results in the following REPL output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>user&gt; (+ 1 2)
;; =&gt; 3</pre>
</div>
</div>
<div class="paragraph">
<p>By default, REPL results have no prefix.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="set-ns-in-repl"><a class="anchor" href="#set-ns-in-repl"></a>Set ns in REPL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default <code>cider-repl-set-ns</code> won&#8217;t require the target ns, just set
it. That&#8217;s done with the assumption that you&#8217;ve probably evaluated the ns in
question already before switching to it (e.g. by doing <kbd>C-c C-k</kbd>
(<code>cider-load-buffer</code>) in its source buffer). If you want to change this behavior
(to avoid calling <code>cider-repl-set-ns</code> and then <code>(require 'my-ns)</code> manually), you
can set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-require-ns-on-set t)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="customizing-the-initial-repl-namespace"><a class="anchor" href="#customizing-the-initial-repl-namespace"></a>Customizing the initial REPL namespace</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Normally, the CIDER REPL will start in the <code>user</code> namespace.  You can
supply an initial namespace for REPL sessions in the <code>repl-options</code>
section of your Leiningen project configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-clojure hljs" data-lang="clojure">:repl-options {:init-ns 'my-ns}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="customize-the-repl-buffers-name"><a class="anchor" href="#customize-the-repl-buffers-name"></a>Customize the REPL Buffer&#8217;s Name</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can customize the buffer name using the variable
<code>cider-session-name-template</code>. See the documentation for this variable for
details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="font-locking"><a class="anchor" href="#font-locking"></a>Font-locking</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Normally, code in the REPL is font-locked the same way as in
<code>clojure-mode</code>. Before CIDER 0.10, by default, REPL input was
font-locked with <code>cider-repl-input-face</code> (after pressing
<kbd>Return</kbd>) and results were font-locked with
<code>cider-repl-result-face</code>. If you want to restore the old behavior
use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-use-clojure-font-lock nil)</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can temporarily disable the Clojure font-locking by using
<kbd>M-x cider-repl-toggle-clojure-font-lock</kbd>
or the REPL shortcut <code>toggle-font-lock</code>.</p>
</div>
<div class="paragraph">
<p>Keep in mind that by default <code>cider-repl-input-face</code> simply makes the input bold
and <code>cider-repl-result-face</code> is blank (meaning it doesn&#8217;t really apply any
font-locking to results), so you might want to adjust those faces to your
preferences. Some Emacs color themes might be providing different defaults for
them.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Using Clojure font-locking in the REPL can impact performance negatively, especially
when it comes to font-locking huge results. That, however, is mitigated to a big extent
by result streaming.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="font-locking-of-results"><a class="anchor" href="#font-locking-of-results"></a>Font-locking of Results</h3>
<div class="paragraph">
<p>There are a few things you need to keep in mind about Clojure font-locking of results:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When streaming is enabled only single-chunk results will be font-locked as Clojure, as
each chunk is font-locked by itself and the results can&#8217;t really be combined</p>
</li>
<li>
<p>The font-locking of results is an expensive operation which involves copying the value
to a temporary buffer, where we check its integrity and do the actual font-locking.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default CIDER instructs nREPL to stream data in 4K chunks, but you can easily modify this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">;; let's stream data in 8K chunks
(setq cider-print-buffer-size (8 * 1024))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Setting this to <code>nil</code> will result in using nREPL&#8217;s default <code>buffer-size</code> of 1024 bytes.
The smaller the print buffer size the faster you&#8217;ll get feedback/updates in the REPL, so generally
it&#8217;s a good idea to stick to some relatively small size.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you&#8217;d like to learn more about the font-locking of results you can check
out the definition of <code>clojure-font-lock-as</code> and <code>clojure-font-lock-as-clojure</code>
in <code>cider-util.el</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pretty-printing-in-the-repl"><a class="anchor" href="#pretty-printing-in-the-repl"></a>Pretty printing in the REPL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default the REPL always prints the results of your evaluations using the
printing function specified by <code>cider-print-fn</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This behavior was changed in CIDER 0.20. In prior CIDER releases
pretty-printing was disabled by default.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can temporarily disable this behavior and revert to the default behavior
(equivalent to <code>clojure.core/pr</code>) using <kbd>M-x cider-repl-toggle-pretty-printing</kbd>
or the REPL shortcut <code>toggle-pprint</code>.</p>
</div>
<div class="paragraph">
<p>If you want to disable using <code>cider-print-fn</code> entirely, use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-use-pretty-printing nil)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that disabling pretty-printing is not advised. Emacs does not handle well
very long lines, so using a printing function that wraps lines beyond a certain
width (i.e. any of them except for <code>pr</code>) will keep your REPL running smoothly.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See <a href="../usage/pretty_printing.html" class="xref page">this section of the documentation</a> for
more information on configuring printing.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="displaying-images-in-the-repl"><a class="anchor" href="#displaying-images-in-the-repl"></a>Displaying images in the REPL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Starting with CIDER 0.17 (Andalucía) expressions that evaluate to
images can be rendered as images in the REPL. You can enable this
behavior like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-use-content-types t)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This setting used to be enabled by default until CIDER 0.25 when it was
disabled due to some rough edges with the feature that were
never properly addressed. See this <a href="https://github.com/clojure-emacs/cider/issues/2825">bug report</a>
for details.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Alternatively, you can toggle this behavior on and off using <kbd>M-x cider-repl-toggle-content-types</kbd>
or the REPL shortcut <code>toggle-content-types</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="repl-type-detection"><a class="anchor" href="#repl-type-detection"></a>REPL type detection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Normally CIDER would detect automatically the type of a REPL (Clojure or ClojureScript), based
on information it receives from the <code>track-state</code> middleware, that&#8217;s part of <code>cider-nrepl</code>.</p>
</div>
<div class="paragraph">
<p>In some rare cases (e.g. a bug in <code>cider-nrepl</code> or <code>shadow-cljs</code>) this
auto-detection might fail and return the wrong type (e.g. Clojure instead of
ClojureScript).  You can disable the auto-detection logic like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-auto-detect-type nil)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Afterwards you can use <code>cider-repl-set-type</code> to set the right type manually.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Using <code>cider-repl-set-type</code> without disabling
<code>cider-repl-auto-detect-type</code> won&#8217;t do much, as the REPL type will constantly be
reset automatically by the <code>track-state</code> middleware.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="repl-history"><a class="anchor" href="#repl-history"></a>REPL history</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>To make the REPL history wrap around when CIDER reaches the end:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-wrap-history t)</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To adjust the maximum number of items kept in the REPL history:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-history-size 1000) ; the default is 500</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>To store the REPL history in a file:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lisp hljs" data-lang="lisp">(setq cider-repl-history-file "path/to/file")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that CIDER writes the history to the file when you kill the REPL
buffer, which includes invoking <code>cider-quit</code>, or when you quit Emacs.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="keybindings.html">Keybindings</a></span>
  <span class="next"><a href="history.html">REPL History</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright (C) 2012-2022 <a href="https://batsov.com">Bozhidar Batsov</a> and <a href="https://cider.mx">CIDER</a> contributors.</p>
  <p>Except where otherwise noted, docs.cider.mx is licensed under the <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a> (CC BY-SA 4.0).</p>
</footer>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script>
<script type="text/javascript">
 docsearch({
   appId: '1AZEMR3ZT0',
   apiKey: 'd2cfc21fce00ac9d3f787c0d8e064d42',
   indexName: 'cider',
   container: '#docsearch',
   debug: false // Set debug to true if you want to inspect the dropdown
 });
</script>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
